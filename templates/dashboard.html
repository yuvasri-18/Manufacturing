{% extends "base.html" %}

{% block content %}
<h2>Welcome, {{ current_user.username }}</h2>

<!-- KPI Cards -->
<div class="kpi-container" style="display:flex; gap:20px; margin-bottom:30px;">
    <div class="kpi-card" style="flex:1; padding:20px; background-color:#f0f2f5; border-radius:10px; text-align:center; box-shadow:0 2px 5px rgba(0,0,0,0.1);">
        <h3>Total Orders</h3>
        <p>{{ total_orders }}</p>
    </div>
    <div class="kpi-card in-progress" style="flex:1; padding:20px; background-color:#fff4e5; border-radius:10px; text-align:center; box-shadow:0 2px 5px rgba(0,0,0,0.1);">
        <h3>In Progress</h3>
        <p>{{ in_progress }}</p>
    </div>
    <div class="kpi-card completed" style="flex:1; padding:20px; background-color:#e6ffed; border-radius:10px; text-align:center; box-shadow:0 2px 5px rgba(0,0,0,0.1);">
        <h3>Completed</h3>
        <p>{{ completed }}</p>
    </div>
    <div class="kpi-card delayed" style="flex:1; padding:20px; background-color:#ffe6e6; border-radius:10px; text-align:center; box-shadow:0 2px 5px rgba(0,0,0,0.1);">
        <h3>Delayed</h3>
        <p>{{ delayed }}</p>
    </div>
</div>

<!-- Recent Orders Table -->
<h3>Recent Manufacturing Orders</h3>
<table class="table" style="width:100%; border-collapse:collapse; margin-top:15px;">
    <thead style="background-color:#f0f2f5;">
        <tr>
            <th style="padding:10px; border:1px solid #ddd;">ID</th>
            <th style="padding:10px; border:1px solid #ddd;">Customer Name</th>
            <th style="padding:10px; border:1px solid #ddd;">Product Name</th>
            <th style="padding:10px; border:1px solid #ddd;">Status</th>
            <th style="padding:10px; border:1px solid #ddd;">Placed Date</th>
            <th style="padding:10px; border:1px solid #ddd;">Delivery Date</th>
        </tr>
    </thead>
    <tbody>
        {% for order in orders %}
        <tr>
            <td style="padding:10px; border:1px solid #ddd;">{{ order.id }}</td>
            <td style="padding:10px; border:1px solid #ddd;">{{ order.customer_name }}</td>
            <td style="padding:10px; border:1px solid #ddd;">{{ order.product_name }}</td>
            <td style="padding:10px; border:1px solid #ddd;">{{ order.status }}</td>
            <td style="padding:10px; border:1px solid #ddd;">{{ order.placed_date.strftime('%Y-%m-%d') }}</td>
            <td style="padding:10px; border:1px solid #ddd;">{{ order.delivery_date.strftime('%Y-%m-%d') }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% endblock %}
